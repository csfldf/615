<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/panel.css"/>
    <link rel="stylesheet" href="js/base/bs-tagsinput/bootstrap-tagsinput.css"/>
</head>
<body>
<div ms-controller="prj_create">
<div style="position: relative;left:0px;top:0px;">
    <!--<a type="button" id="btn_all" ms-class="btn btn-default" ms-click="showPrj()">项目概览</a>-->
    <!--<a type="button" id="btn_create" ms-class="btn btn-default" ms-click="crtPrj()">创建项目</a>-->
    <!--<a type="button" id="btn_group" ms-class="btn btn-default" ms-click="maintainPrj()">项目团队维护</a>-->
</div>
<div  style="position: relative;left:0px;">
    <div ms-visible="allSel" class="panel panel-default" style="position:relative;">
        <div class="panel-heading" style="background-color: #abc5cb">我创建的项目</div>
        <table class="table" id="prjCreatedByMe">
            <!--<caption>我的项目</caption>-->
            <thead>
            <tr>
                <!--<th></th>-->
                <!--<th>序号-->
                <!--<span class="sort-icons" style="position:relative">-->
                <!--<i class="icon-chevron-up" ms-click="orderByDictGmp(prjList, 'id', 1)"></i>-->
                <!--<i class="icon-chevron-down" ms-click="orderByDictGmp(prjList, 'id', 0)"></i>-->
                <!--</span>-->
                <!--</th>-->
                <th>项目名称
            <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('prjList', 'projectName', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'projectName', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('prjList','projectName')" style="position: relative;left: 20px"></i>
	        	    </span>
                </th>
                <th>项目类别
            <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('prjList', 'prjType', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'prjType', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('prjList','prjType')" style="position: relative;left: 20px"></i>
	        	    </span>
                </th>
                <th>项目课题号
            <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('prjList', 'prjSubId', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'prjSubId', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('prjList','prjSubId')" style="position: relative;left: 20px"></i>
	        	    </span>
                </th>
                <th>项目经理
            <span class="sort-icons" style="position:relative">
	        		<!--<i class="icon-chevron-up" ms-click="orderByDict('prjList', 'manager', 1)"></i>-->
	        		<!--<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'manager', 0)"></i>-->
                    <!--<i class="icon-filter" ms-click="filterConfig('prjList','manager')" style="position: relative;left: 20px"></i>-->
	        	    </span>
                </th>
                <th>开始时间
            <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('prjList', 'startDate', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'startDate', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('prjList','startDate')" style="position: relative;left: 20px"></i>
	        	    </span>
                </th>
                <th>结束时间
            <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('prjList','endDate', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('prjList', 'endDate', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('prjList','endDate')" style="position: relative;left: 20px"></i>
	        	    </span>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ms-attr-id="'prjs'+el.projectId" class="one-row" ms-repeat="data.prjList.curReports" >
                <td>{{el.projectName}}</td>
                <td>{{el.prjType}}</td>
                <td>{{el.prjSubId}}</td>
                <td>
                    <span ms-repeat="el.manager" class="tag label label-info">{{el.employeeName}}<span data-role="remove"></span></span>
                </td>
                <td>{{el.startDate}}</td>
                <td>{{el.endDate}}</td>
                <!--<a ms-click="del(el.employeeId)">删除</a><br>-->
            </tr>
            </tbody>
        </table>
        <div>
            <span style="position:relative;bottom: 3px;left: 1%">每页显示</span>
            <select ms-change="setPagesMessage('prjList')" ms-duplex="data.prjList.pageSize"
                    style="position: relative;bottom: 0px;left: 2%;width: 4%">
                <option value ="5" selected="selected">5</option>
                <option value ="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
            </select>
            <span style="position: relative;bottom:3px;left: 5%">从总共{{data.prjList.totalNum}}项中选择了{{data.prjList.filterNum}}项</span>
            <span style="position: relative;bottom:3px;left: 30%">
                <button ms-click="prePage('prjList')"><i class="icon-chevron-left" ></i></button>
                第 {{data.prjList.indexPage+1}} 页，共 {{data.prjList.pageNum}} 页
                <button ms-click="nextPage('prjList')"><i class="icon-chevron-right" ></i></button>
            </span>
            <span style="position: relative;left:60%"><a ms-click="reset('prjList')">重置</a></span>
        </div>
        <!--<a  ms-click="modifyMemberINFO()" role="button" class="btn btn-warning">修改</a >-->
        <!--<a ms-click="del()" role="button" class="btn btn-danger">删除</a></td>-->
    </div>
</div>
<div ms-visible="createPrjSel" style="position: relative;left:0px;width: 48%;float: left">
    <div class="accordion-group">
        <div class="accordion-heading" style="background-color: #abc5cb"><a class="accordion-toggle" contenteditable="false" ms-click="changeMessageImg_crt"
                                          data-parent="#accordion-300" data-toggle="collapse" style="color: darkred"
                                          href="#accordion-element-2">项目创建<img id="imgMessage_crt" src="img/shrink.png" /></a></div>
        <div class="accordion-body in collapse" id="accordion-element-2" style="position:relative;bottom:0px;left:0px;height:auto;">
            <div class="accordion-inner" id="crt_inner" contenteditable="false">
                <form ms-attr-id="createPrj">
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目名称:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.projectName" ms-enabled="true"
                                           name="projectName" type="text" maxlength="30"
                                           class="input-xlarge span11" autofocus required style="width: 50%">
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目简称:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.prjShortName" ms-enabled="true" name="prjShortName"
                                           type="text"  maxlength="30" class="input-xlarge span11" autofocus
                                           required  style="width: 50%">
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目分类:</label>

                                <div class="controls">
                                    <select id=prjTypeSel ms-duplex="createPrj.prjTypeId" name="prjType"
                                            maxlength="30" class="input-xlarge" required  style="width: 50%">
                                        <option ms-repeat="prjTypes" ms-value="el.id">
                                            {{el.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目课题号:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.prjSubId" ms-enabled="true" name="prjSubId"
                                           maxlength="30" type="text" class="input-xlarge span11" autofocus
                                           required  style="width: 50%">
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">合同编号:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.contractId" ms-enabled="true"
                                           maxlength="30"  name="contractId" type="text"
                                           class="input-xlarge span11" autofocus required  style="width: 50%">
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">所领导:</label>

                                <div class="controls">
                                    <div class="input-append">
                                        <!--<input ms-duplex="createPrj.insLeader" ms-enabled="true" name="insLeader"-->
                                        <!--type="text" class="input-xlarge span11" autofocus-->
                                        <!--required><a class="inline btn" ms-click="pickman(1)">选择员工</a>-->
                                        <div class="bootstrap-tagsinput" >
                                            <span  ms-repeat="tmpInsLeader" class="tag label label-info">{{el.employeeName}}<span data-role="remove" ms-click="removePickedMan(1,el.employeeNumber)"></span></span><a class="inline btn"  ms-click="pickman(1)">选择员工</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">部门领导:</label>

                                <div class="controls">
                                    <div class="input-append">
                                        <!--<input ms-duplex="createPrj.depLeader" ms-enabled="true" name="depLeader"-->
                                        <!--type="text" class="input-xlarge span11" autofocus-->
                                        <!--required><a class="inline btn"  ms-click="pickman(2)">选择员工</a>-->
                                        <div class="bootstrap-tagsinput" >
                                            <span  ms-repeat="tmpDepLeader" class="tag label label-info">{{el.employeeName}}<span data-role="remove" ms-click="removePickedMan(2,el.employeeNumber)"></span></span><a class="inline btn"  ms-click="pickman(2)">选择员工</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目领导:</label>

                                <div class="controls">
                                    <div class="input-append">
                                        <div class="bootstrap-tagsinput" >
                                            <span  ms-repeat="tmpPrjLeader" class="tag label label-info">{{el.employeeName}}<span data-role="remove" ms-click="removePickedMan(3,el.employeeNumber)"></span></span><a class="inline btn"  ms-click="pickman(3)">选择员工</a>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">项目经理:</label>

                                <div class="controls">
                                    <div class="input-append">
                                        <!--<input ms-duplex="createPrj.manager" ms-enabled="true" name="manager"-->
                                        <!--type="text" class="input-xlarge span11" autofocus-->
                                        <!--required><a class="inline btn"  ms-click="pickman(4)">选择员工</a>-->
                                        <div class="bootstrap-tagsinput" >
                                            <span  ms-repeat="tmpManager" class="tag label label-info">{{el.employeeName}}<span data-role="remove" ms-click="removePickedMan(4,el.employeeNumber)"></span></span><a class="inline btn"  ms-click="pickman(4)">选择员工</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">开始时间:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.startDate" ms-enabled="true" name="startDate"
                                           type="date" class="input-xlarge span11" autofocus
                                           required  style="width: 50%">
                                </div>
                            </div>
                        </div>

                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">结束时间:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.endDate" ms-enabled="true"
                                           name="endDate" type="date"
                                           class="input-xlarge span11" autofocus required ms-change="checkTimeLine()"  style="width: 50%">
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label  " style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">收入预算:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.inBudget" ms-enabled="true" name="inBudget"
                                           maxlength="30" type="text" class="input-xlarge span11" autofocus
                                           required  style="width: 50%">
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label" style="width:80px;display: block;float: left;margin-right: 15px;margin-top: 4px">支出预算:</label>

                                <div class="controls">
                                    <input ms-duplex="createPrj.outBudget" ms-enabled="true"
                                           maxlength="30"  name="outBudget" type="text"
                                           class="input-xlarge span11" autofocus required  style="width: 50%">
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary" ms-click="createAprj()" style="position:relative;top:25px">创建</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div ms-visible="empListSel" style="position: relative;width:48%;float:right">
    <!--<div class="panel-heading">员工列表</div>-->
    <div class="accordion-group">
        <div class="accordion-heading" style="background-color: #abc5cb">
            <a class="accordion-toggle" contenteditable="false" ms-click="changeMessageImg_empList" data-parent="#accordion-100" data-toggle="collapse" style="color: darkred" href="#accordion-element-3">员工列表<img id="imgMessage_empList" src="img/shrink.png" /></a>
        </div>
        <div class="accordion-body in collapse" id="accordion-element-3" style="position:relative;bottom:0px;left:0px;height:auto;">
            <div class="accordion-inner" id="empList_inner" contenteditable="false">
                <table class="table" id="employeeList">
                    <thead>
                    <tr>
                        <!--<th></th>-->
                        <th>
                            员工号
                    <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('employees', 'employeeNumber', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('employees', 'employeeNumber', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('employees','employeeNumber')" style="position: relative;left: 20px"></i>
	        	    </span>
                        </th>
                        <th>
                            员工姓名
                    <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up"ms-click="orderByDict('employees', 'employeeName', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('employees', 'employeeName', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('employees','employeeName')" style="position: relative;left: 20px"></i>
	        	    </span>
                        </th>
                        <th>
                            所在部门
                    <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up"ms-click="orderByDict('employees', 'departmentName', 1)"></i>
	        		<i class="icon-chevron-down" ms-click="orderByDict('employees', 'departmentName', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('employees','departmentName')" style="position: relative;left: 20px"></i>
	        	    </span>
                        </th>
                        <!--<th>-->
                        <!--行政组-->
                        <!--<span class="sort-icons" style="position:relative">-->
                        <!--<i class="icon-chevron-up" ms-click="orderByDictEmp(employees, 'groupName', 1)"></i>-->
                        <!--<i class="icon-chevron-down" ms-click="orderByDictEmp(employees, 'groupName', 0)"></i>-->
                        <!--</span>-->
                        <!--</th>-->
                        <th>
                            专业
                    <span class="sort-icons" style="position:relative">
	        		<i class="icon-chevron-up" ms-click="orderByDict('employees', 'major', 1)"></i>
	        		<i class="icon-chevron-down"ms-click="orderByDict('employees', 'major', 0)"></i>
                    <i class="icon-filter" ms-click="filterConfig('employees','major')" style="position: relative;left: 20px"></i>
	        	    </span>
                        </th>
                        <th>
                            参加项目数
                    <span class="sort-icons" style="position:relative">
                    <i class="icon-chevron-up" ms-click="orderByDict('employees','prjCount', 1)"></i>
                    <i class="icon-chevron-down"ms-click="orderByDict('employees', 'prjCount', 0)"></i></span>
                            <i class="icon-filter" ms-click="filterConfig('employees','prjCount')" style="position: relative;left: 20px"></i>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="one-row" ms-repeat="data.employees.curReports" ms-click="addOneSelectMan(el)">
                        <!--<td><input ms-attr-id="'employee'+el.employeeNumber" class="checkbox" type="checkbox" ms-click="select(el)" ms-duplex="employeeCheckArray" ms-attr-value="el.employeeNumber"></td>-->
                        <td>{{el.employeeNumber}}</td>
                        <td>{{el.employeeName}}</td>
                        <td>{{el.departmentName}}</td>
                        <!--<td>{{el.groupName}}</td>-->
                        <td>{{el.major}}</td>
                        <td>{{el.prjCount}}</td>
                    </tr>
                    </tbody>
                </table>
                <div>
                    <span style="position:relative;bottom: 3px;left: 1%">每页显示</span>
                    <select ms-change="setPagesMessage('employees')" ms-duplex="data.employees.pageSize"
                            style="position: relative;bottom: 0px;left: 2%;width: 80px">
                        <option value ="5" selected="selected">5</option>
                        <option value ="10">10</option>
                        <option value="15">15</option>
                        <option value="20">20</option>
                    </select>
                    <span style="position: relative;bottom:3px;left: 5%">从总共{{data.employees.totalNum}}项中选择了{{data.employees.filterNum}}项</span>
                            <span style="position: relative;bottom:3px;left: 10%">
                                <button ms-click="prePage('employees')"><i class="icon-chevron-left" ></i></button>
                                第 {{data.employees.indexPage+1}} 页，共 {{data.employees.pageNum}} 页
                                <button ms-click="nextPage('employees')"><i class="icon-chevron-right" ></i></button>
                            </span>
                    <span style="position: relative;left:25%"><a ms-click="reset('employees')">重置</a></span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" ms-attr-id="modalName" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" style="display: none; ">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    筛选内容
                </h4>
            </div>
            <div class="modal-body">
                <div class="panel panel-default" ms-visible="true">
                    <table class="table table-hover" >
                        <thead>
                        <tr>
                            <th><a class="btn-primary" ms-click="selALL(1)">全选</a><br><a class="btn-danger" ms-click="selALL(0)">全不选</a></th>
                            <th>筛选内容</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ms-repeat="filter.org_values">
                            <td>
                                <input class="checkbox" type="checkbox" ms-duplex-radio="el.enabled">
                            </td>
                            <td>
                                {{el.name}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <button style="float:right" type="button" ms-click="executeFilter()" class="btn btn-primary">
                    确认
                </button>
                <button style="float:left" type="button" ms-attr-id="modalBtn" class="btn btn-default"
                        data-dismiss="modal" >关闭
                </button>
            </div>
        </div>
    </div>
</div>
</div>

</div>

</body>
<script src="../js/avalon.js"></script>
<link rel="stylesheet" href="../css/base/bootstrap.css">
<script src="../js/globalConfig.js"></script>
<script>
    require(['am.prjCreate','jquery','bootstrap'], function (data,$) {
        avalon.scan();
    } );

</script>
</html>