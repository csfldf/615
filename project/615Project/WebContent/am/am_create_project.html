<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" charset="utf-8" name="create_project" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
<table class='table' id="projects" ms-controller="projectReport">
    <caption>项目列表</caption>
    <thead>
    <tr>
        <th>项目编号</th>
        <th>项目名称</th>
        <th>项目负责人</th>
        <th>详情</th>
    </tr>
    </thead>
    <tbody>
    <tr ms-duplex="projects" ms-repeat="projects" ms-value="el" >
        <td>{{el.projectId}}</td>
        <td>{{el.projectName}}</td>
        <td>{{el.manager}}</td>
        <td><a ms-href="#!/am/project/groupDistribution/{{el.projectId}}">详情</a></td>
    </tr>
    </tbody>
</table>

<!-- 按钮触发模态框 -->
<button class="btn btn-primary btn-lg" data-toggle="modal"
        data-target="#myModal">
    创建新项目
</button>

<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" ms-controller="projectReport">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    创建新项目
                </h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form ms-attr-id="$formId">
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label">项目编号</label>

                                <div class="controls">
                                    <input ms-duplex="project.projectId" name="projectId" type="text"
                                           class="input-xlarge" autofocus required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label">项目名称</label>

                                <div class="controls">
                                    <input ms-duplex="project.projectName" name="projectName" type="text"
                                           class="input-xlarge" autofocus required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group"><!-- Text input-->
                                <label class="control-label">项目负责人</label>
                                <div class="controls">
                                    <select id=employeeSel ms-duplex="project.employeeId" name="employeeId" class="input-xlarge" required>
                                        <option ms-repeat="employees" ms-value="el.employeeNumber">{{el.employeeName}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        id="close_btn" data-dismiss="modal">关闭
                </button>
                <button type="button" ms-click="create()" class="btn btn-primary">
                    创建
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
</body>
<script src="../js/avalon.js"></script>
<link rel="stylesheet" href="../css/base/bootstrap.css">
<script src="../js/globalConfig.js"></script>
<script>
    require(['am.projectManager','jquery','bootstrap','datatables.bootstrap'], function (data,$) {
        $(document).ready(function () {
            avalon.scan();
            $('#projects').DataTable({
            });

        });
    });

</script>
</html>